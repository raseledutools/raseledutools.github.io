<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nature Noise Generator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #000; /* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡¶æ‡¶≤‡ßã ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶≠‡¶æ‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden; /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶¨‡¶®‡ßç‡¶ß */
        }

        /* ‡¶≠‡¶ø‡¶ú‡ßç‡¶Ø‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶≠‡¶æ‡¶∏ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        #visual-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* ‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
            opacity: 0.6; /* ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶®‡¶§‡¶æ ‡¶¨‡¶æ‡ßú‡¶æ‡¶®‡ßã ‡¶π‡¶≤‡ßã */
        }

        h1 { margin-bottom: 30px; color: #00d2be; text-shadow: 0 0 10px rgba(0,0,0,0.5); }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* ‡ß™ ‡¶ï‡¶≤‡¶æ‡¶Æ */
            gap: 15px;
            max-width: 900px;
        }

        .sound-btn {
            background: rgba(51, 51, 51, 0.6); /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶∏‡ßç‡¶¨‡¶ö‡ßç‡¶õ */
            border: 1px solid #444;
            color: #ddd;
            padding: 15px 10px;
            font-size: 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            width: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .sound-btn span {
            font-size: 24px;
            margin-bottom: 8px;
        }

        /* Active State (On) */
        .sound-btn.active {
            background: rgba(0, 106, 78, 0.8);
            border-color: #00d2be;
            color: white;
            box-shadow: 0 0 15px rgba(0, 210, 190, 0.4);
            transform: scale(1.05);
        }

        .sound-btn:hover {
            border-color: #00d2be;
            background: rgba(70, 70, 70, 0.8);
        }

        .volume-control {
            margin-top: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0,0,0,0.5);
            padding: 10px 20px;
            border-radius: 20px;
        }

        input[type=range] {
            width: 200px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <!-- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶≠‡¶æ‡¶∏ -->
    <canvas id="visual-canvas"></canvas>

    <h1>Nature Noise Generator</h1>

    <div class="grid">
        <button class="sound-btn" id="white" onclick="toggleSound('white')">
            <span>üì∫</span> White Noise
        </button>
        <button class="sound-btn" id="brown" onclick="toggleSound('brown')">
            <span>üèîÔ∏è</span> Brown Noise
        </button>
        <button class="sound-btn" id="rain" onclick="toggleSound('rain')">
            <span>üåßÔ∏è</span> Heavy Rain
        </button>
        <button class="sound-btn" id="waterfall" onclick="toggleSound('waterfall')">
            <span>üåä</span> Waterfall
        </button>
        
        <!-- ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶æ‡¶ü‡¶® -->
        <button class="sound-btn" id="wind" onclick="toggleSound('wind')">
            <span>üí®</span> Wind
        </button>
        <button class="sound-btn" id="fire" onclick="toggleSound('fire')">
            <span>üî•</span> Bonfire
        </button>
        <button class="sound-btn" id="thunder" onclick="toggleSound('thunder')">
            <span>‚ö°</span> Thunder
        </button>
        <button class="sound-btn" id="night" onclick="toggleSound('night')">
            <span>ü¶ó</span> Night
        </button>
    </div>

    <div class="volume-control">
        <span>Volume: </span>
        <input type="range" min="0" max="100" value="30" oninput="changeVolume(this.value)">
    </div>

    <script>
        // --- ‡ßß. ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ---
        let audioCtx;
        const activeNodes = {}; // ‡¶™‡ßç‡¶≤‡ßá ‡¶π‡¶ì‡ßü‡¶æ ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
        let masterGain;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                masterGain = audioCtx.createGain();
                masterGain.gain.value = 0.3; 
                masterGain.connect(audioCtx.destination);
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }

        function createNoiseBuffer(type) {
            const bufferSize = 2 * audioCtx.sampleRate;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const output = buffer.getChannelData(0);

            if (type === 'white' || type === 'rain' || type === 'wind') {
                for (let i = 0; i < bufferSize; i++) {
                    output[i] = Math.random() * 2 - 1;
                }
            } else if (type === 'brown' || type === 'waterfall' || type === 'fire' || type === 'thunder') {
                let lastOut = 0;
                for (let i = 0; i < bufferSize; i++) {
                    const white = Math.random() * 2 - 1;
                    output[i] = (lastOut + (0.02 * white)) / 1.02;
                    lastOut = output[i];
                    output[i] *= 3.5;
                }
            }
            return buffer;
        }

        function toggleSound(type) {
            initAudio();
            const btn = document.getElementById(type);

            // ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ
            if (activeNodes[type]) {
                if(activeNodes[type].stop) activeNodes[type].stop(); // For oscillators
                if(activeNodes[type].source) activeNodes[type].source.stop(); // For buffers
                delete activeNodes[type];
                btn.classList.remove('active');
                return;
            }

            // ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ
            btn.classList.add('active');

            // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° (Night/Cricket) - ‡¶Ö‡¶∏‡¶ø‡¶≤‡ßá‡¶ü‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá
            if (type === 'night') {
                playCrickets(type);
                return;
            }
            
            // ‡¶®‡ßü‡ßá‡¶ú ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶°
            const buffer = createNoiseBuffer(type);
            const source = audioCtx.createBufferSource();
            source.buffer = buffer;
            source.loop = true;

            const filter = audioCtx.createBiquadFilter();

            // ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶≤‡¶ú‡¶ø‡¶ï
            if (type === 'white') {
                source.connect(masterGain);
            } 
            else if (type === 'brown') {
                source.connect(masterGain);
            }
            else if (type === 'rain') {
                filter.type = 'lowpass';
                filter.frequency.value = 800;
                source.connect(filter);
                filter.connect(masterGain);
            } 
            else if (type === 'waterfall') {
                filter.type = 'highpass';
                filter.frequency.value = 100;
                source.connect(filter);
                filter.connect(masterGain);
            }
            else if (type === 'wind') {
                // ‡¶¨‡¶æ‡¶§‡¶æ‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶™‡¶æ‡¶∏ ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞
                filter.type = 'bandpass';
                filter.frequency.value = 400;
                filter.Q.value = 1; // ‡¶¨‡¶æ‡¶§‡¶æ‡¶∏‡ßá‡¶∞ ‡¶∂‡ßã‡¶Å ‡¶∂‡ßã‡¶Å ‡¶≠‡¶æ‡¶¨
                source.connect(filter);
                filter.connect(masterGain);
                
                // ‡¶¨‡¶æ‡¶§‡¶æ‡¶∏‡ßá‡¶∞ ‡¶ó‡¶§‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® (Modulation)
                const lfo = audioCtx.createOscillator();
                lfo.frequency.value = 0.1; // ‡¶ñ‡ßÅ‡¶¨ ‡¶ß‡ßÄ‡¶∞ ‡¶ó‡¶§‡¶ø
                const lfoGain = audioCtx.createGain();
                lfoGain.gain.value = 300;
                lfo.connect(lfoGain);
                lfoGain.connect(filter.frequency);
                lfo.start();
                activeNodes[type] = { source: source, lfo: lfo }; // LFO ‡¶∏‡¶π ‡¶∏‡ßá‡¶≠
                return;
            }
            else if (type === 'fire') {
                // ‡¶Ü‡¶ó‡ßÅ‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡ßã-‡¶™‡¶æ‡¶∏ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶® ‡¶®‡ßü‡ßá‡¶ú + ‡¶ï‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶≤‡¶ø‡¶Ç ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ (‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶¨‡ßá‡¶∏ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶≤‡ßã)
                filter.type = 'lowpass';
                filter.frequency.value = 200; // ‡¶Ü‡¶ó‡ßÅ‡¶®‡ßá‡¶∞ ‡¶ó‡¶∞‡ßç‡¶ú‡¶®
                source.connect(filter);
                filter.connect(masterGain);
            }
            else if (type === 'thunder') {
                // ‡¶¨‡¶ú‡ßç‡¶∞‡¶™‡¶æ‡¶§‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ñ‡ßÅ‡¶¨ ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶∂‡¶¨‡ßç‡¶¶
                filter.type = 'lowpass';
                filter.frequency.value = 150;
                source.connect(filter);
                filter.connect(masterGain);
            }

            source.start();
            if (!activeNodes[type]) activeNodes[type] = { source: source };
        }

        // ‡¶ù‡¶ø‡¶Å‡¶ù‡¶ø‡¶Å ‡¶™‡ßã‡¶ï‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ï (Cricket Sound Synthesis)
        function playCrickets(type) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            const modulator = audioCtx.createOscillator();
            const modGain = audioCtx.createGain();

            osc.type = 'triangle';
            osc.frequency.value = 4500; // ‡¶π‡¶æ‡¶á ‡¶™‡¶ø‡¶ö

            modulator.type = 'square';
            modulator.frequency.value = 4; // ‡¶™‡ßã‡¶ï‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ï‡ßá‡¶∞ ‡¶∞‡¶ø‡¶¶‡¶Æ
            
            modGain.gain.value = 1000; // ‡¶Æ‡¶°‡ßÅ‡¶≤‡ßá‡¶∂‡¶® ‡¶°‡ßá‡¶™‡¶•

            // ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶®: Modulator -> Oscillator Frequency (FM)
            // ‡¶∏‡¶ø‡¶Æ‡ßç‡¶™‡¶≤ ‡¶Ü‡¶Æ‡ßç‡¶™‡¶≤‡¶ø‡¶ö‡¶ø‡¶â‡¶° ‡¶Æ‡¶°‡ßÅ‡¶≤‡ßá‡¶∂‡¶® (AM) ‡¶≠‡¶æ‡¶≤‡ßã ‡¶∂‡ßã‡¶®‡¶æ‡ßü
            const amGain = audioCtx.createGain();
            osc.connect(amGain);
            
            modulator.connect(amGain.gain);
            
            amGain.connect(masterGain);
            
            osc.start();
            modulator.start();

            activeNodes[type] = { 
                stop: () => { osc.stop(); modulator.stop(); } 
            };
        }

        function changeVolume(val) {
            if (masterGain) {
                masterGain.gain.value = val / 100;
            }
        }

        // --- ‡ß®. ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì/‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ (Canvas) ---
        const canvas = document.getElementById('visual-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = []; 
        let stars = []; // ‡¶§‡¶æ‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
        let flashOpacity = 0; // ‡¶¨‡¶ú‡ßç‡¶∞‡¶™‡¶æ‡¶§‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø

        // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶≠‡¶æ‡¶∏ ‡¶∞‡¶ø‡¶∏‡¶æ‡¶á‡¶ú ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶ï‡¶∞‡¶æ
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initParticles();
            initStars();
        }
        window.addEventListener('resize', resize);
        
        function initStars() {
            stars = [];
            for(let i=0; i<200; i++) {
                stars.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    size: Math.random() * 2,
                    alpha: Math.random()
                });
            }
        }

        function initParticles() {
            particles = [];
            for(let i=0; i<500; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    speed: Math.random() * 10 + 5,
                    len: Math.random() * 20 + 10,
                    angle: Math.random() * Math.PI * 2, // ‡¶¨‡¶æ‡¶§‡¶æ‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
                    life: Math.random() * 100 // ‡¶Ü‡¶ó‡ßÅ‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
                });
            }
        }
        
        resize();

        // ‡¶ï‡ßã‡¶® ‡¶≠‡¶ø‡¶ú‡ßç‡¶Ø‡ßÅ‡ßü‡¶æ‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶§‡ßá ‡¶π‡¶¨‡ßá ‡¶§‡¶æ ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ
        function getVisualType() {
            // ‡¶≤‡¶æ‡¶∏‡ßç‡¶ü ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶¨‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶•‡¶æ‡¶ï‡¶æ ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶≠‡¶ø‡¶ú‡ßç‡¶Ø‡ßÅ‡ßü‡¶æ‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
            if (activeNodes['thunder']) return 'thunder';
            if (activeNodes['fire']) return 'fire';
            if (activeNodes['wind']) return 'wind';
            if (activeNodes['night']) return 'night';
            if (activeNodes['waterfall']) return 'waterfall';
            if (activeNodes['rain']) return 'rain';
            if (activeNodes['white']) return 'white';
            if (activeNodes['brown']) return 'brown';
            return null;
        }

        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶≤‡ßÅ‡¶™
        function animate() {
            requestAnimationFrame(animate);
            const activeType = getVisualType();

            // ‡¶ü‡ßç‡¶∞‡ßá‡¶á‡¶≤ ‡¶è‡¶´‡ßá‡¶ï‡ßç‡¶ü ‡¶¨‡¶æ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
            if (activeType === 'white' || activeType === 'brown' || activeType === 'night') {
                ctx.clearRect(0, 0, width, height);
            } else if (activeType === 'fire') {
                 ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; // ‡¶∏‡ßç‡¶Æ‡ßÅ‡¶• ‡¶ü‡ßç‡¶∞‡ßá‡¶á‡¶≤
                 ctx.fillRect(0, 0, width, height);
            } else {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; 
                ctx.fillRect(0, 0, width, height);
            }

            if (!activeType) return;

            // ‡¶≠‡¶ø‡¶ú‡ßç‡¶Ø‡ßÅ‡ßü‡¶æ‡¶≤ ‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡¶æ
            if (activeType === 'white') drawStatic(2, 'white');
            else if (activeType === 'brown') drawStatic(20, '#5C4033');
            else if (activeType === 'rain') drawRain(false);
            else if (activeType === 'waterfall') drawRain(true);
            else if (activeType === 'wind') drawWind();
            else if (activeType === 'fire') drawFire();
            else if (activeType === 'thunder') drawThunder();
            else if (activeType === 'night') drawNight();
        }

        // --- ‡¶°‡ßç‡¶∞‡¶Ø‡¶º‡¶ø‡¶Ç ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶∏‡¶Æ‡ßÇ‡¶π ---

        function drawStatic(size, color) {
            for (let i = 0; i < 800; i++) {
                ctx.fillStyle = color === 'white' ? 
                    `rgba(255, 255, 255, ${Math.random()})` : 
                    `rgba(92, 64, 51, ${Math.random() * 0.5})`;
                const x = Math.floor(Math.random() * (width / size)) * size;
                const y = Math.floor(Math.random() * (height / size)) * size;
                ctx.fillRect(x, y, size, size);
            }
        }

        function drawRain(isWaterfall) {
            ctx.strokeStyle = isWaterfall ? 'rgba(135, 206, 235, 0.5)' : 'rgba(174, 194, 224, 0.5)';
            ctx.lineWidth = isWaterfall ? 3 : 1;
            ctx.beginPath();
            for(let p of particles) {
                ctx.moveTo(p.x, p.y);
                ctx.lineTo(p.x, p.y + p.len);
                p.y += isWaterfall ? p.speed * 2.5 : p.speed;
                if (p.y > height) { p.y = -p.len; p.x = Math.random() * width; }
            }
            ctx.stroke();
        }

        function drawWind() {
            ctx.strokeStyle = 'rgba(200, 200, 200, 0.1)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for(let p of particles) {
                ctx.moveTo(p.x, p.y);
                ctx.lineTo(p.x + p.len * 2, p.y); // ‡¶π‡¶∞‡¶æ‡¶á‡¶ú‡¶®‡ßç‡¶ü‡¶æ‡¶≤ ‡¶≤‡¶æ‡¶á‡¶®
                p.x += p.speed * 3; // ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶ó‡¶§‡¶ø
                if (p.x > width) { p.x = -p.len * 2; p.y = Math.random() * height; }
            }
            ctx.stroke();
        }

        function drawFire() {
            for(let p of particles) {
                // ‡¶Ü‡¶ó‡ßÅ‡¶® ‡¶®‡¶ø‡¶ö ‡¶•‡ßá‡¶ï‡ßá ‡¶â‡¶†‡¶¨‡ßá
                if (p.life <= 0) {
                    p.x = width / 2 + (Math.random() * 100 - 50);
                    p.y = height;
                    p.life = Math.random() * 100;
                    p.speed = Math.random() * 2 + 1;
                }
                
                // ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶ó‡ßç‡¶∞‡ßá‡¶°‡¶ø‡ßü‡ßá‡¶®‡ßç‡¶ü (‡¶π‡¶≤‡ßÅ‡¶¶ ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡¶æ‡¶≤)
                const r = 255;
                const g = Math.floor((p.life / 100) * 200);
                const b = 0;
                const a = p.life / 100;
                
                ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${a})`;
                ctx.beginPath();
                ctx.arc(p.x, p.y, Math.random() * 5 + 2, 0, Math.PI * 2);
                ctx.fill();

                p.y -= p.speed; // ‡¶â‡¶™‡¶∞‡ßá ‡¶ì‡¶†‡¶æ
                p.x += Math.random() * 2 - 1; // ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶®‡ßú‡¶æ‡¶ö‡ßú‡¶æ
                p.life -= 1;
            }
        }

        function drawThunder() {
            // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶´‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶≤‡¶ú‡¶ø‡¶ï
            if (Math.random() > 0.98) flashOpacity = 1; // ‡¶π‡¶†‡¶æ‡ßé ‡¶´‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶∂
            
            if (flashOpacity > 0) {
                ctx.fillStyle = `rgba(255, 255, 255, ${flashOpacity})`;
                ctx.fillRect(0, 0, width, height);
                flashOpacity -= 0.1; // ‡¶´‡ßá‡¶° ‡¶Ü‡¶â‡¶ü
            } else {
                drawRain(false); // ‡¶´‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶¨‡ßÉ‡¶∑‡ßç‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
            }
        }

        function drawNight() {
            // ‡¶ï‡¶æ‡¶≤‡ßã ‡¶Ü‡¶ï‡¶æ‡¶∂
            ctx.fillStyle = '#050510';
            ctx.fillRect(0, 0, width, height);

            // ‡¶§‡¶æ‡¶∞‡¶æ
            for(let s of stars) {
                ctx.fillStyle = `rgba(255, 255, 255, ${Math.abs(Math.sin(Date.now() * 0.001 + s.x))})`; // ‡¶Æ‡¶ø‡¶ü‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ
        animate();

    </script>
</body>
</html>